function scrollToTop(){const c=document.documentElement.scrollTop||document.body.scrollTop;c>0&&(window.requestAnimationFrame(scrollToTop),window.scrollTo(0,c-c/8))}const searchInput=document.getElementById("search-input"),searchButton=document.getElementById("search-button"),resultsContainer=document.getElementById("results");function fetchAndShow(){const query=encodeURIComponent(searchInput.value),url=`https://cors-anywhere.azm.workers.dev/https://v3.sg.media-imdb.com/suggestion/x/${query}.json`;Pace.restart(),fetch(url).then(response=>response.json()).then(data=>{const results=data.d;resultsContainer.innerHTML="",results.forEach(result=>{if(result.i&&("movie"===result.qid||"tvSeries"===result.qid)){const resultElem=document.createElement("div");resultElem.classList.add("result");let image="",info="";"movie"===result.qid&&result.i?(image=`<a onClick="return setVideo(this)" isWebSeries="false" title="${result.l}"  class="links" IMDB="${result.id}" href="https://www.2embed.to/embed/imdb/movie?id=${result.id}" target="_blank">\n                    <img src="${result.i.imageUrl}">\n                  </a>`,info=`\n            <div class="info">\n              <h3>${result.l}</h3>\n              <p>${result.s}</p>\n            </div>\n          `):"tvSeries"===result.qid&&result.i&&(image=`<a onClick="return setVideo(this)" IMDB="${result.id}" title="${result.l}" isWebSeries="true" class="links" href="https://www.2embed.to/embed/imdb/tv?id=${result.id}&s=1&e=1" target="_blank">\n                    <img src="${result.i.imageUrl}">\n                  </a>`,info=`\n            <div class="info">\n              <h3>${result.l}</h3>\n              <p>${result.s}</p>\n            </div>\n          `),resultElem.innerHTML=image+info,resultsContainer.appendChild(resultElem)}})})}function episodeHighlight(cssidentification="s1e1"){document.querySelectorAll(".episodes").forEach((function(episode){episode.className="episodes"})),document.querySelector(`.episodes[cssidentification='${cssidentification}']`).className="episodes selected"}function setVideo(element){const iframe=document.getElementById("iframe");iframe.src=element.getAttribute("href"),iframe.style.display="block";const webSeriesData=document.getElementById("webSeriesData"),tmdbApiKey="b6b677eb7d4ec17f700e3d4dfc31d005",imdbID=element.getAttribute("IMDB");if(Pace.restart(),scrollToTop(),"false"==element.getAttribute("isWebSeries")&&"links"==element.className&&(webSeriesData.innerHTML=""),""!==element.getAttribute("title")&&(document.title=element.getAttribute("title")),element.className.includes("episode")&&episodeHighlight(element.getAttribute("cssidentification")),"true"==element.getAttribute("isWebSeries")){async function printEpisodes(){const response=await fetch(`https://api.themoviedb.org/3/find/${imdbID}?api_key=${tmdbApiKey}&language=en-US&external_source=imdb_id`),data=await response.json(),showId=data.tv_results[0].id,seasonsData=await fetch(`https://api.themoviedb.org/3/tv/${showId}?api_key=${tmdbApiKey}&language=en-US`),seasonsDataJSON=await seasonsData.json(),numberOfSeasons=seasonsDataJSON.number_of_seasons;webSeriesData.innerHTML+="<h2>Seasons:</h2>";for(let seasonNumber=1;seasonNumber<=numberOfSeasons;seasonNumber++){webSeriesData.innerHTML+=`<h3>Season ${seasonNumber}:</h3><br>`;let episodeContainer=document.createElement("div");episodeContainer.classList.add("episode-container");let episodesData="";const episodesDataResponse=await fetch(`https://api.themoviedb.org/3/tv/${showId}/season/${seasonNumber}?api_key=${tmdbApiKey}&language=en-US`),episodesDataJSON=await episodesDataResponse.json();for(const episode of episodesDataJSON.episodes){const episodeNumber=episode.episode_number;let formatedEpisodeNumber=episodeNumber.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});episodesData+=`<a class="episodes" title="${seasonsDataJSON.name+": E"+formatedEpisodeNumber+". "+episode.name}" cssidentification="s${seasonNumber}e${episodeNumber}" onClick="return setVideo(this)" href="https://www.2embed.to/embed/tmdb/tv?id=${showId}&s=${seasonNumber}&e=${episodeNumber}">E${formatedEpisodeNumber}. ${episode.name}</a>`}episodeContainer.innerHTML=episodesData,webSeriesData.appendChild(episodeContainer),episodeHighlight(),document.querySelector('a[cssIdentification="s1e1"]').click()}}webSeriesData.innerHTML="",printEpisodes()}return!1}searchInput.addEventListener("keyup",(function(){fetchAndShow(),$("html,body").animate({scrollTop:$("#results").offset().top},"slow")})),searchButton.addEventListener("click",(function(){fetchAndShow()}));